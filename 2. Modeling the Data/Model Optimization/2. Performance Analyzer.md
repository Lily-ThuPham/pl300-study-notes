*First understand the current performance of a report and identify any problem areas before making changes.*
 *Identify the slowest query in the semantic model, you can focus on the biggest bottleneck first and establish a priority list to work through the other issues.*
# Performance Analyzer
The Performance Analyzer, a tool in Power BI, is designed to help you understand the low time for each visual element in the report.
It allows you to:
- Measure the loading time of individual visuals.
- Identify performance-intensive queries and data sources.
- Analyze the impact of filters and slicers on report performance.
[**Use Performance Analyzer to examine report element performance**](https://learn.microsoft.com/en-us/power-bi/create-reports/desktop-performance-analyzer)
## Before running 
Clear visual cache and data engine cache 
- **Visual cache** - When you load a visual, you can't clear this visual cache without closing Power BI Desktop and opening it again. To avoid any caching in play, you need to start your analysis with a clean visual cache.
    To ensure that you have a clear visual cache, add a blank page to your Power BI Desktop (.pbix) file and then, with that page selected, save and close the file. Reopen the Power BI Desktop (.pbix) file that you want to analyze. It will open on the blank page.
- **Data engine cache** - When a query is run, the results are cached, so the results of your analysis will be misleading. You need to clear the data cache before rerunning the visual.
    To clear the data cache, you can either restart Power BI Desktop or connect DAX Studio to the semantic model and then call Clear Cache.
## Run performance analyzer 
In **View** tab, select the **Performance analyzer** option.
To begin the analysis process, select **Start recording**, select the page of the report that you want to analyze, and interact with the elements of the report that you want to measure. You will see the results of your interactions display in the **Performance analyzer** pane as you work. 
When you are finished, select the **Stop** button.
## Review results 
To review the tasks in order of duration, longest to shortest, right-click the **Sort** icon next to the **Duration (ms)** column header, and then select **Total time** in **Descending** order.
The log information for each visual shows how much time it took (duration) to complete the following categories of tasks:
- **DAX query** - The time it took for the visual to send the query, along with the time it took Analysis Services to return the results.
- **Visual display** - The time it took for the visual to render on the screen, including the time required to retrieve web images or geocoding.
- **Other** - The time it took the visual to prepare queries, wait for other visuals to complete, or perform other background processing tasks. If this category displays a long duration, the only real way to reduce this duration is to optimize DAX queries for other visuals, or reduce the number of visuals in the report.
- **Evaluated parameters (preview)**: The time spent on field parameters.
To analyze your queries in more detail, you can use DAX Studio, which is a free, open-source tool that is provided by another service.
**Key Takeaways:**
- **Baseline Measurement:** Establish a baseline performance measurement before making any changes to your report.
- **Data-Driven Decision Making:** Make informed decisions about report optimization strategies based on data-driven insights.
- **Continuous Improvement:** Monitor performance over time and identify opportunities for ongoing optimization.
# Resolve issues and optimize performance 
## Visual 
Consider the number of visuals on the report page; fewer visuals means better performance.
Rather than using multiple visuals on the page, consider other ways to provide additional details, such as drill-through pages and report page tooltips.
Examine the number of fields in each visual. The more visuals you have on the report, the higher chance for performance issues.
- The upper limit for visuals is 100 fields (measures or columns)
## Optimize DAX query 
Begin to evaluate any DAX query that is taking longer than 120ms.
Use DAX Studio to investigate your queries in more detail.
	For example, select **Copy Query** to copy the calculation formula onto the clipboard, then paste it into Dax Studio.
### Module 3 - Optimization 
**Optimizing DAX Queries:** By simplifying formulas, using optimized functions, and leveraging data model optimizations, you can improve query performance.
#### [[Power BI/PL-300 Prep/2. Modeling the Data/Model Optimization/6. Using variables for DAX optimization]]
- [**DAX overview**](https://learn.microsoft.com/en-us/dax/dax-overview): Explore the fundamentals of Data Analysis Expressions (DAX), a versatile formula expression language used in Power BI. Master the range of calculations possible with DAX, learning how its formulas operate in measures, calculated columns, and calculated tables. Familiarize yourself with the process of creating and modifying these measures using the DAX formula bar.

### Extra 
**1. Understand DAX Engine Behavior**
- **Context Transition:** Be aware of how the DAX engine transitions between row contexts and filter contexts. Inefficient context transitions can slow down calculations.
- **Storage Engine:** The VertiPaq storage engine is highly optimized, but understanding its limitations can help you write more efficient DAX.
**2. Simplify DAX Formulas**
- **Break Down Complex Formulas:** Divide complex calculations into smaller, more manageable steps.
- **Leverage Built-in Functions:** Use optimized built-in functions like `SUMX`, `AVERAGEX`, and `CALCULATE` to simplify calculations.
- **Avoid Unnecessary Iterations:** Minimize the number of times the DAX engine needs to iterate over data.
- **Use Appropriate Data Types:** Ensure that data types are correctly defined to optimize calculations.
**3. Considering Alternative approaches**
- **DAX Studio:** Use DAX Studio to test and analyze DAX queries outside of Power BI.
- **Power Query:** Leverage Power Query to transform and clean data before loading it into the Power BI model.
- **Power BI Service Optimization:** Optimize your Power BI service settings to improve report performance and user experience.
**4. Additional Tips**
- **Avoid Unnecessary CALCULATE Functions:** Use them judiciously, as they can impact performance.
- **Utilize DAX Variables:** Use variables to store intermediate calculations and improve readability.
- **Leverage Time Intelligence Functions:** Use built-in time intelligence functions to efficiently calculate time-based metrics.
- **Optimize Filter Context:** Use appropriate filters to reduce the amount of data processed by DAX queries.
## Sematic model 
 if the DAX query is displaying a high duration value, it is likely that a measure is written poorly or an issue has occurred with the semantic model.
 The issue might be caused by the relationships, columns, or metadata in your model, or it could be the status of the **Auto date/time** option, as explained in the following section.

